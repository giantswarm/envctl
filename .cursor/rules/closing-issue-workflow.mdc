---
description: 
globs: 
alwaysApply: true
---
When closing an issue:

1.  Confirm with the user that the issue is ready to be closed.
2.  Run tests by executing the `make test` command in the terminal using `run_terminal_cmd`.
3.  **If tests fail:**
    *   You have to fix the tests.
    *   DO NOT proceed with closing the issue.
4.  **If tests pass:**
    *   Use the `mcp_github_update_issue` tool to change the state of the issue to 'closed'. Make sure to specify the `owner` as `giantswarm`, `repo` as `envctl`, and the correct `issue_number`.
    *   Briefly mention the issue (title and number) that was closed.
    *   Inform the user that tests passed and the issue is closed, then ask if they want to proceed with committing and pushing the changes, which will trigger the `commit-and-push-workflow`.
