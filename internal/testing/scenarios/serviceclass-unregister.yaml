name: "serviceclass-unregister"
category: "behavioral"
concept: "serviceclass"
description: "Tests unregistering a ServiceClass on the fly."
tags: ["serviceclass", "unregister", "core-api"]
timeout: "1m"

pre_configuration:
  service_classes:
  - name: "to-be-unregistered-sc"
    config:
      name: "to-be-unregistered-sc"
      type: "basic"
      serviceConfig:
        lifecycleTools: { start: {tool: "core_service_list"}, stop: {tool: "core_service_list"} }
steps:
- id: "unregister-sc"
  description: "Unregister the pre-configured ServiceClass"
  tool: "core_serviceclass_unregister"
  args:
    name: "to-be-unregistered-sc"
  expected:
    success: true

- id: "verify-unregistered-sc-is-gone"
  description: "Verify the ServiceClass can no longer be retrieved"
  tool: "core_serviceclass_get"
  args:
    name: "to-be-unregistered-sc"
  expected:
    success: false
    error_contains: ["not found"] 