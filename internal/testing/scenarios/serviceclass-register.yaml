name: "serviceclass-register"
category: "behavioral"
concept: "serviceclass"
description: "Tests registering a ServiceClass definition."
tags: ["serviceclass", "register", "core-api"]
timeout: "1m"

steps:
- id: "register-serviceclass"
  description: "Register a ServiceClass and verify it's available"
  tool: "core_serviceclass_register"
  args:
    name: "register-test-sc"
    type: "basic"
    version: "1.0.0"
    description: "ServiceClass for register testing"
    serviceConfig:
      serviceType: "test-service"
      defaultLabel: "registered-{{ .name }}"
      lifecycleTools:
        start:
          tool: "x_test-provider_start_service"
          arguments:
            service_name: "{{ .name }}"
          responseMapping:
            serviceId: "id"
            status: "state"
        stop:
          tool: "x_test-provider_stop_service"
          arguments:
            service_id: "{{ .service.id }}"
  expected:
    success: true
  cleanup:
    - id: "unregister-serviceclass"
      tool: "core_serviceclass_unregister"
      args:
        name: "register-test-sc" 