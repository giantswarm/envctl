name: "service-create-with-persistence"
category: "behavioral"
concept: "service"
tags: ["service", "create", "persistence", "core-api"]
timeout: "1m"

pre_configuration:
  service_classes:
  - name: "sc-for-persistence"
    config:
      name: "sc-for-persistence"
      serviceConfig:
        lifecycleTools:
          start: { tool: "core_config_get" }
          stop: { tool: "core_config_get" }
steps:
- id: "create-persistent-service"
  tool: "core_service_create"
  args:
    serviceClassName: "sc-for-persistence"
    name: "persistent-service"
  expected:
    success: true
  cleanup:
  - tool: "core_service_delete"
    args: { name: "persistent-service" }
- id: "verify-persistence-flag"
  tool: "core_service_get"
  args: { name: "persistent-service" }
  expected:
    success: true
    # This is a conceptual check. The actual implementation would need to
    # expose a 'persisted' flag on the service instance object.
    # For now, we assume the create call succeeded as intended.
    json_path:
      name: "persistent-service" 